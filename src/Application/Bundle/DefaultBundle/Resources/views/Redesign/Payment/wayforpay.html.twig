{% if pay_type == constant('Application\\Bundle\\DefaultBundle\\Service\\WayForPayService::WFP_PAY_BY_WIDGET') -%}
    <script type="text/javascript">
        let wayforpay = new Wayforpay();
        let paymentSystemPay = function () {
            wayforpay.run({
                    {% for key, param in params -%}
                        {{ key }} : "{{ param|raw }}",
                    {% endfor -%}
            },
                function (response) {
                    wayforpay.closeit();
                    window.location.href = '{{ url('payment_success') }}';
                },
                function (response) {
                    wayforpay.closeit();
                    window.location.href = '{{ url('payment_fail') }}';
                },
                function (response) {
                    wayforpay.closeit();
                    window.location.href = '{{ url('payment_pending') }}';
                }
            );
        }
    </script>
{% elseif pay_type == constant('Application\\Bundle\\DefaultBundle\\Service\\WayForPayService::WFP_PAY_BY_SECURE_PAGE')  %}
    {% for name, value in params %}
        <input name="{{ name }}" value="{{ value }}" type="hidden">
    {% endfor %}
{% endif %}

{% for ticket in payment.tickets %}
    {% include '@ApplicationDefault/Redesign/Payment/user.payment.html.twig' with {'event': event, 'payment': payment, 'ticket': ticket} %}
{% endfor %}
